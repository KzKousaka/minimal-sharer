/*!
 * minimal sharer - v1.0.0 (2013-03-01)
 *
 * @author creasty
 * @url http://github.com/creasty/minimal-sharer
 * @copyright 2013 creasty
 * @license MIT
 */
(function(t,e,n){var r,i;return r={twitter:{count:"http://urls.api.twitter.com/1/urls/count.json?url={url}&callback=?",link:"https://twitter.com/intent/tweet?text={%title}&url={url}&via={twitter}",filter:function(t){return t.count},click:"toolbar=0, status=0, width=650, height=360"},facebook:{count:"http://graph.facebook.com/{%url}",link:"http://www.facebook.com/sharer.php?u={url}",filter:function(t){return t.shares},click:"toolbar=0, status=0, width=900, height=500"},gplus:{count:"?service=gplus&id={url}",link:"https://plusone.google.com/_/+1/confirm?hl={lang}&url={url}",dataType:"text",click:"toolbar=0, status=0, width=900, height=500",init:function(t,e){return e.script?"?"===this.count.charAt(0)?this.count=e.script+this.count:void 0:t.service.count=null}},hatena:{count:"http://api.b.st-hatena.com/entry.count?url={url}&callback=?",link:"http://b.hatena.ne.jp/entry/{url}",dataType:"text"},pinterest:{count:"http://api.pinterest.com/v1/urls/count.json?url={url}&callback=?",link:"http://pinterest.com/pin/create/button/?url={%url}&media={%image}&description={%description}",filter:function(t){return t.count}},linkedin:{count:"http://www.linkedin.com/countserv/count/share?url={url}&format=json",link:"http://www.linkedin.com/sharer.php?u={url}&t={%title}",filter:function(t){return t.count}},stumble:{count:"http://www.stumbleupon.com/services/1.01/badge.getinfo?url={url}",link:"http://www.stumbleupon.com/submit?url={url}&title={%title}",filter:function(t){return t.result.views}},tumblr:{link:"http://www.tumblr.com/share?v=3&u={%url}&t={%title}&s="},mail:{link:"mailto:?body={%title} {%url}"},evernote:{init:function(){return e.Evernote?void 0:t("head").append('<script src="http://static.evernote.com/noteit.js" async="async"></script>')},click:function(t,n){var r;if(e.Evernote)return Evernote.doClip({providerName:n.site,url:n.url,title:n.title,contentId:null!=(r=n.contentId)?r:"main"})}}},i={meta:null,init:function(){var r,i,l,c,u,o,a,s,p;if(!this.meta)return r=t("meta"),this.meta={url:null!=(i=null!=(l=r.filter("[property=og\\:url]").attr("content"))?l:r.filter("[name=canonical]").attr("content"))?i:e.location.href,title:null!=(c=r.filter("[property=og\\:title]").attr("content"))?c:n.title,site:null!=(u=r.filter("[property=og\\:site_name]").attr("content"))?u:"",image:null!=(o=r.filter("[property=og\\:image]").attr("content"))?o:"",lang:null!=(a=t("html").attr("lang"))?a:"ja",twitter:null!=(s=null!=(p=r.filter("[name=twitter\\:site]").attr("content"))?p.replace(/^\@/,""):void 0)?s:""}},bind:function(t,e){return t.replace(/\{(%)?(\w+)\}/g,function(t,n,r){var i,l;return i=null!=(l=e[r])?l:"",n?encodeURIComponent(i):i})},getCount:function(e,n){var r;return t.ajax({dataType:null!=(r=e.service.dataType)?r:"json",url:this.bind(e.service.count,n),success:function(t){return e.service.filter&&(t=e.service.filter(t)),e.$counter.text(t||"0"),e.$btn.show()},error:function(){return e.$counter.hide(),e.$btn.removeClass("has-counter").show()}})},click:function(n,r){var i=this;return n.$link.click(function(l){return n.$counter&&n.$counter.text(parseInt(n.$counter.text(),10)+1),t.isFunction(n.service.click)?(l.preventDefault(),n.service.click(n,r)):n.service.click?(l.preventDefault(),e.open(i.bind(n.service.link,r),null,n.service.click)):void 0})},create:function(e,n){var i,l,c,u,o,a;o=n.buttons,a=[];for(c in o)l=o[c],i={service:r[c]},i.service&&l&&(i.$btn=t('<li class="'+c+'"><a href="#" class="link">'+l+"</a></li>").appendTo(e),i.$link=i.$btn.children(".link"),"function"==typeof(u=i.service).init&&u.init(i,n),i.service.count&&(i.$btn.hide().addClass("has-counter"),i.$counter=t('<span class="counter">0</span>').appendTo(i.$btn),this.getCount(i,n)),i.service.link&&(i.$link.attr("href",this.bind(i.service.link,n)),i.$link.attr("target",i.service.link.match(/^https?:/i)?"_blank":"_self")),a.push(this.click(i,n)));return a}},t.fn.minimalSharer=function(e){return e.buttons?(i.init(),e=t.extend({},i.meta,e),this.each(function(){return i.create(t(this),e)})):this},t.minimalSharer={extend:function(e){return t.extend(r,e)}}})($,window,document);